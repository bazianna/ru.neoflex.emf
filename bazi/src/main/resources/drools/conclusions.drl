package ru.neoflex.emf.bazi

import ru.neoflex.emf.bazi.natalChart.NatalChart
import ru.neoflex.emf.bazi.natalChart.InputParams
import ru.neoflex.emf.bazi.calendar.Calendar
import ru.neoflex.emf.bazi.calendar.Year
import ru.neoflex.emf.bazi.calendar.CalendarFactory
import ru.neoflex.emf.bazi.calendar.BaZiDate
import ru.neoflex.emf.bazi.natalChart.NatalChartFactory
import ru.neoflex.emf.bazi.natalChart.Pillar
import ru.neoflex.emf.bazi.natalChart.Zoo
import ru.neoflex.emf.bazi.natalChart.Elements
import java.util.Arrays
import java.util.List
import ru.neoflex.emf.restserver.DBServerSvc
import com.fasterxml.jackson.databind.ObjectMapper
import com.fasterxml.jackson.databind.ObjectWriter
import ru.neoflex.emf.bazi.natalChart.God
import ru.neoflex.emf.bazi.natalChart.Conclusion

function NatalChart addPersonalityElement(NatalChart natalChart) {
    Pillar day = natalChart.getDay();
    Elements personalityElement = day.getSky();
    List<Elements> elements = Arrays.asList(Elements.values());
    Integer skyDayIndex = elements.indexOf(personalityElement);

    String description =
        skyDayIndex == 1 ?
             "Как большое раскидистое дерево. " +
             "Дыхание жизни - творчество и вдохновение. Иначе чувство мертвости. " +
             "Обожаешь новые идеи и вообще всё новое. " +
             "Нужна в постоянном встряхивании эмоциональном, тогда начинаешь что-то делать. Обычно это бывает мало приятно. " +
             "Доброта и стремление отдавать доминирует. " +
             "Всегда поможешь, если человеку правда нужна помощь. Часто обращаются к тебе люди. " +
             "Очень упряма, несгибаема. Даже если поняла, что была не права. Не идешь на компромиссы. " +
             "Тяжело переживаешь падения. " +
             "Настойчивость, целеустремленность в достижении цели, не видя преград. " +
             "Прямолинейность и откровенность. Сказала, как отрезала. " +
             "Видишь картинку целиком. Способна понять ключевые факторы ситуации и проблемы в кратчайшие сроки. " +
             "Быстро принимаешь решения. " +
             "Предугадываешь исход событий. Видишь на перед. " +
             "Профессия определяет твою личность. Должность и статус очень важны. " +
             "Уверенность в себе зависит от финансового состояния и внешнего вида. " +
             "С увеличением дохода растет самоуважение. "
            :
            skyDayIndex == 2 ?
                 "Как большое раскидистое дерево. "
                :
                skyDayIndex == 3 ?
                     "Это Солнце. " +
                     "Лидерские качества. " +
                     "Великодушие. " +
                     "Внутренняя эмоциональность. " +
                     "Настойчив в своих действиях. " +
                     "Позитивное мышление. " +
                     "Надежность, наполненность энергией и настойчивость. " +
                     "Ничего тебя не удержит. " +
                     "Способность преодолеть все препятствия. " +
                     "Позитивное мышление. " +
                     "Видишь всегда только хорошее. " +
                     "Часто пропускаешь важные вещи, делаешь поверхностную оценку. " +
                     "Быстро принимаешь решения без какие-то неожиданных действий для других. " +
                     "Закапываешься в рутине (нужен перерыв). " +
                     "Рождена излучать уверенность. " +
                     "Вера в свои способности. " +
                     "Никогда не устаешь прикладывать усилия, чтобы сделать работу. " +
                     "Любишь рутину, не изменяешь системе. " +
                     "Когда дружишь, кто вкладываешься на все 100. " +
                     "Всегда искренняя и настоящая. " +
                     "Оказываешься положительное впечатление на других всегда. " +
                     "Можешь подружиться хоть с кем. "
                    :
                    skyDayIndex == 4 ?
                         "Как большое раскидистое дерево. "
                        :
                        skyDayIndex == 5 ?
                             "Как большое раскидистое дерево. "
                            :
                            skyDayIndex == 6 ?
                                 "Как почва, взращивающая растения. " +
                                 "Находчивый, продуктивный и очень способный. " +
                                 "Хорошо адаптируется к ситуации. " +
                                 "Легко справляешься с неожиданными обстоятельствами. " +
                                 "Всегда готов учиться новому. " +
                                 "Самые терпимые и снисходительные из всех. " +
                                 "Важно быть полезным. Чувствовать себя полезным. От этого зависит самооценка. " +
                                 "Предприимчивый, много создаешь. " +
                                 "Важно духовное развитие. " +
                                 "Хорошая память и запоминание информации. " +
                                 "Полагается всегда на своё восприятие вещей. " +
                                 "Принимаешь Решения, пользуясь чувствами и интуицией. " +
                                 "Смысл жизни - прожить культурная и цивилизованную жизнь. " +
                                 "Продуктивный в работе. " +
                                 "Мягкий и добрый. " +
                                 "Видишь в людях лучшее. Редко встречал людей ооочень плохих. " +
                                 "Привлекаешь людей своей уравновешенностью. Как в работе, так и в личной жизни. "
                                :
                                skyDayIndex == 7 ?
                                     "Как большое раскидистое дерево. "
                                    :
                                    skyDayIndex == 8 ?
                                         "Как большое раскидистое дерево. " +
                                        :
                                        skyDayIndex == 9 ?
                                             "Бурная река, океан. " +
                                             "Любовь к воде и всему голубому. " +
                                             "Часто может казаться окружающим, что ты льешь воду. На самом деле, ты говоришь разными словами одно и тоже, чтобы максимальное количество людей всё поняли. А понимают все по-разному. " +
                                             "Дипломат по природе. " +
                                             "Важно: Ум и Знания. " +
                                             "Инициативная. " +
                                             "Предприимчивая. " +
                                             "Умная. " +
                                             "Свобода архиважна. " +
                                             "Систематичность. " +
                                             "Организованность и структурность. Чтобы всё по порядку. " +
                                             "Аналитичность. " +
                                             "Амбиции через край. " +
                                             "Целеустремленность. " +
                                             "Бизнес смекалка. " +
                                             "Быстрое решение любой проблемы. " +
                                             "С удовольствием берешь любые знания. " +
                                             "Обожаешь общественную деятельность. " +
                                             "Хорошая память. Можешь много информации удержать в голове одновременно. " +
                                             "Осторожно принимаешь решения. Дотошность при принятии. Изучение всех фактов, цифр. " +
                                             "Самооценка повышается, когда ты знаешь, что выглядишь в хорошем свете перед другими - Безупречная репутация (не берут взятки). " +
                                             "Большой удар - оказаться на вторых ролях. " +
                                             "Легко можешь быть откровенна. Рассказывать о себе. И тактично говорить людям, в чем они не правы. "
                                            :
                                                 "Как большое раскидистое дерево. ";

    Conclusion conclusion = NatalChartFactory.eINSTANCE.createConclusion();
    conclusion.setTitle("Ключевые качества характера");
    conclusion.setDescription(description);
    natalChart.getConclusions().add(conclusion);
    return natalChart;
}

rule "Set Conclusion Personality Element"
no-loop true
when
    $natalChart: NatalChart(day != null)
    $baZiDate: BaZiDate(day != null)
then
    addPersonalityElement($natalChart);
    update($natalChart);
end;
